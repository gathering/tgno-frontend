---
import CloseSymbol from "../icons/CloseSymbol.astro";
import FilterCloseSymbol from "../icons/FilterCloseSymbol.astro";

export interface ActiveFilter {
  name: string;
  slug: string;
  url: string;
  required?: boolean;
}

interface Props {
  activeFilters: Array<{
    name: string;
    slug: string;
    url: string;
    required?: boolean;
  }>;
  resetUrl?: string;
}

const { activeFilters, resetUrl } = Astro.props;
const optionalFilters = activeFilters.filter(
  ({ required }) => !required,
).length;
---

{
  activeFilters.length ? (
    <div class="flex flex-row flex-wrap gap-2 mt-4">
      {activeFilters.map(({ name, required, url }) => (
        <a
          href={url}
          class="flex flex-row items-center gap-2 py-1 px-2 border rounded-md text-md font-bold bg-orange-500 text-black border-orange-500 hover:bg-white hover:text-backgroundSecondary"
        >
          {name}
          {!required ? <CloseSymbol /> : null}
        </a>
      ))}
      {resetUrl && optionalFilters ? (
        <a
          href={resetUrl}
          class="flex flex-row items-center gap-2 py-1 px-2 border rounded-md text-md font-bold bg-orange-500 text-black border-orange-500 hover:bg-white hover:text-backgroundSecondary"
        >
          <FilterCloseSymbol />
        </a>
      ) : null}
    </div>
  ) : null
}
